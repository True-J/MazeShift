var map = [
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,0,1,1,1,1],[1,1,0,1,0,0,0]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,0,1,0,1,1],[0,0,0,1,0,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,1,0,1,1],[1,1,1,1,0,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,1,1,1,1],[1,1,0,1,0,0,0]],
    [[1,1,0,1,0,1,1],[1,1,0,1,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,1,1,1,1],[0,0,0,1,1,1,1]],
    [[1,1,1,1,0,1,1],[1,1,1,1,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,1,0,1,1],[1,1,1,1,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,0,1,0,1,1],[1,1,0,1,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,0,1,0,1,1],[1,1,0,1,0,0,0]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,0,1,1],[0,0,0,1,0,1,1]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,1,1,1,1,0],[1,1,1,1,1,1,0]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[0,0,0,0,0,0,0]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[0,1,1,1,1,1,1]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,0,1,1,1,1],[1,1,0,1,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,0,1,0,1,1],[1,1,0,1,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[0,1,1,0,1,1,0],[0,1,1,0,1,1,0]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[0,1,1,1,1,1,1],[0,1,1,1,1,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,0,0],[0,0,0,0,0,1,1],[0,1,1,0,1,1,1],[0,1,1,0,1,1,1]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[0,1,1,0,1,1,0],[0,1,1,0,1,1,0],[0,1,0,0,0,1,0],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,1,0,1,1,0],[1,1,1,0,1,1,0]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,0,0],[0,0,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[0,0,0,0,0,0,0],[1,1,1,1,1,1,1],[0,0,0,0,0,0,0],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[0,1,1,0,1,1,1],[0,1,1,0,1,1,1],[0,1,0,0,0,1,1],[1,1,0,0,0,0,0],[0,0,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,0,0,0]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,1,0,1,1],[0,0,0,1,0,1,1]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,1,0,1,1,0],[1,1,1,0,1,1,0],[1,1,0,0,0,1,0],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,1,0,1,1],[1,1,0,1,0,0,0]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[0,0,0,1,1,1,1]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,1,1,1],[1,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[0,0,0,1,0,1,1],[0,1,1,0,0,1,1]],
    [[1,1,1,1,0,1,1],[1,1,1,1,0,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,0,1,1,1,1],[0,0,0,1,1,1,1]],
    [[1,1,1,1,0,0,0],[1,1,1,1,1,1,0],[1,1,0,0,0,1,0],[0,0,0,0,0,1,0],[1,1,0,0,0,1,0],[1,1,0,1,1,1,0],[1,1,0,1,0,0,0]],
    [[1,1,1,0,1,1,1],[1,1,1,0,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,0,1,1,1],[1,1,1,0,1,1,1]],
    [[1,1,0,1,1,1,1],[1,1,0,1,1,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,0,1,1,1,1],[1,1,0,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,1,1,0,0,0],[1,1,1,1,0,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[0,1,0,0,1,1,1],[1,1,0,1,0,0,0],[1,1,0,0,0,1,1],[0,0,0,0,0,0,0],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[0,1,1,1,1,1,1],[0,1,1,1,1,1,1],[1,1,0,0,0,1,1],[0,0,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]],
    [[1,1,0,1,0,1,1],[1,1,0,1,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,0,0,0,1,1],[1,1,1,1,1,1,1],[1,1,1,1,1,1,1]]
];

// room tells the connections to other rooms at level 0.
// room[0] is the map number of the room.
// [1] is north, [2] is north east, [3] is east, [4] is south east, [5] is south, [6] is south west,
//      [7] is west, and [8] is north west.

var room = [
    [0,1,2,3,4,5,7,8,9,10,11,12,13,18,14,15,16,19,20,17,21,22,23,26,27,31,28,30,33,34,29,37,38,39,40,41,35,36,44,43,45,46,47,48,42],
    [0,0,0,0,0,0,0,1,2,0,0,5,0,10,6,0,8,11,12,0,14,15,16,0,18,0,20,22,23,0,21,27,25,0,0,0,26,30,0,37,0,33,0,35,36],
    [0,0,0,0,0,0,0,2,0,0,0,0,0,0,7,0,0,0,0,0,0,0,0,0,0,23,21,0,0,0,0,0,0,0,29,0,0,0,0,0,33,34,0,29,0],
    [1,2,3,4,5,0,0,0,9,10,0,0,0,17,15,16,19,18,0,0,21,22,0,24,0,28,0,25,29,0,0,32,33,34,35,0,37,0,40,38,41,42,0,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,0,0,0,0,23,0,27,0,0,0,0,0,0,0,43,31,0,0,0,0,0,0,38,0,0,0,0,0,0,0],
    [0,7,8,0,0,11,14,0,16,0,13,17,18,0,20,21,22,0,24,0,26,30,27,28,0,32,36,31,0,0,37,0,0,41,0,43,44,39,0,0,0,0,0,0,0],
    [0,0,7,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,26,0,25,0,0,0,0,0,34,0,0,0,40,41,0,0,0,0,0,0,0,0,0,0],
    [0,0,1,2,3,4,0,0,0,8,9,0,0,0,0,14,15,13,17,16,0,20,21,0,23,27,0,0,25,28,0,0,31,32,33,34,0,36,39,0,38,40,41,0,0],
    [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,19,0,0,0,21,0,0,0,30,0,0,0,0,0,0,37,0,0,0,0,0,0]
];

var shiftrooms = [3,4,5,9,14,15,16,20,25,26,27,31,36,37,38,42];

function mapchange() {
    var roomnumber = parseInt(document.getElementById("mapid").value);

    if (shiftrooms.indexOf(parseInt(roomnumber)) != -1){
        document.getElementById("level").value ++;
//        for (var i=0; i<9; i++){
//            for (var j=0; j<45; j++){
//                if (room[i][j] != 0){
//                    room[i][j] = (room[i][j]+(11*document.getElementById("level").value))%44;
//                };
//            };
//        };
        looplevel();
    };

    var mapped = map[room[0][roomnumber]];

    for (var i=0; i<mapped.length; i++){
        for (var j=0; j<mapped[i].length; j++){
            var boxname = "box" + i + j;
            document.getElementById(boxname).style.background = mapped[i][j] ? "black" : "white";
        }
    }
    
    var dirlist = ["N-","NE-","E-","SE-","S-","SW-","W-","NW-"]
    for (var i=0; i<8; i++){
        var x = document.getElementById("b"+i);
        if (room[i+1][roomnumber] == 0){
            x.style.display = "none";
        } else {
            x.style.display = "block";
            x.innerHTML = dirlist[i] + room[i+1][roomnumber];
        }
    }
};

function roomchange(d){
    var roomnumber = document.getElementById("mapid").value;
    document.getElementById("mapid").value = room[d][roomnumber];
    mapchange();
};

function looplevel(){
    if (document.getElementById("level").value > 3 ){
        document.getElementById("level").value = 0;
    }
}

document.getElementById("level").addEventListener("change", function(){
    looplevel();
});

window.addEventListener("DOMContentLoaded", function(){
    mapchange();
});